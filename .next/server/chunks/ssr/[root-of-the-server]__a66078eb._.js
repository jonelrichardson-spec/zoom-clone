module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},5929,(a,b,c)=>{"use strict";b.exports=a.r(18622)},20252,(a,b,c)=>{"use strict";b.exports=a.r(5929).vendored["react-ssr"].ReactJsxRuntime},55770,(a,b,c)=>{"use strict";b.exports=a.r(5929).vendored["react-ssr"].React},84535,a=>{"use strict";function b(){return{supported:!1,message:""}}function c(a){return/^[a-zA-Z0-9_-]{4,36}$/.test(a)}a.s(["checkBrowserSupport",()=>b,"isValidRoomId",()=>c])},72789,a=>{"use strict";var b=a.i(20252),c=a.i(55770);let d={host:"0.peerjs.com",port:443,path:"/",secure:!0},e={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]};var f=a.i(84535);function g({params:g}){let{roomId:h}=(0,c.use)(g),i=(0,c.useRef)(null),j=(0,c.useRef)(null),k=(0,c.useRef)(null),l=(0,c.useRef)(null),m=(0,c.useRef)("host"),n=(0,c.useRef)(null),o=(0,c.useRef)(0),[p,q]=(0,c.useState)("requesting"),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(0),B=(0,c.useRef)(null),C=(0,c.useRef)(null);(0,c.useEffect)(()=>{let{supported:b,message:c}=(0,f.checkBrowserSupport)();if(!b){q("error"),s(c);return}if(!(0,f.isValidRoomId)(h)){q("error"),s("Invalid meeting link. Please check the URL and try again.");return}let g=!1;function p(a){k.current=a,a.on("stream",a=>{l.current=a,C.current&&(C.current.srcObject=a),o.current=0,A(0),q("connected"),y(!1)}),a.on("close",()=>{l.current=null,C.current&&(C.current.srcObject=null),k.current=null,q("waiting"),y(!0)}),a.on("error",()=>{l.current=null,k.current=null,q("waiting")})}function r(a){a.on("disconnected",()=>{g||a.destroyed||function(){if(!g){if(o.current>=3){q("error"),s("Connection lost after multiple attempts. Please refresh and try again.");return}o.current++,A(o.current),q("reconnecting"),setTimeout(()=>{let a=j.current;!g&&a&&a.disconnected&&!a.destroyed&&a.reconnect()},1e3*Math.pow(2,o.current-1))}}()})}return async function(){let b;try{b=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720}},audio:{echoCancellation:!0,noiseSuppression:!0}})}catch(a){if(g)return;if(q("error"),a instanceof DOMException)switch(a.name){case"NotAllowedError":s("Camera access denied. Click the camera icon in your browser's address bar to allow access, then refresh.");break;case"NotFoundError":s("No camera or microphone detected. Please connect a device and refresh.");break;case"NotReadableError":s("Camera or microphone is in use by another application. Close it and refresh.");break;case"OverconstrainedError":s("Camera doesn't support the requested resolution. Please try a different browser.");break;default:s(a.message)}else s("An unexpected error occurred accessing your camera.");return}if(g)return b.getTracks().forEach(a=>a.stop());i.current=b,q("connecting");let{default:c}=await a.A(89018);if(n.current=c,g)return b.getTracks().forEach(a=>a.stop());m.current="host";let f=new c(h,{...d,config:e});j.current=f,f.on("open",()=>{g||(q("waiting"),r(f))}),f.on("call",a=>{g||(a.answer(b),p(a))}),f.on("error",a=>{if(!g)if("unavailable-id"===a.type){var i;let a;f.destroy(),i=b,m.current="joiner",j.current=a=new c({...d,config:e}),a.on("open",()=>{if(g)return;r(a);let b=a.call(h,i);b&&p(b)}),a.on("call",a=>{g||(a.answer(i),p(a))}),a.on("error",a=>{g||("peer-unavailable"===a.type?q("waiting"):(q("error"),s("Connection failed. Check your internet connection and try again.")))})}else q("error"),s("Connection failed. Check your internet connection and try again.")})}(),()=>{g=!0,k.current?.close(),j.current?.destroy(),i.current&&(i.current.getTracks().forEach(a=>a.stop()),i.current=null)}},[h]);let D="connecting"===p||"waiting"===p||"connected"===p||"reconnecting"===p,E="requesting"===p?"Requesting camera access":"connecting"===p?"Connecting to server":"waiting"===p?x?"Participant left the call":"Waiting for participant":"reconnecting"===p?`Reconnecting, attempt ${z} of 3`:"connected"===p?"Connected":"";return(0,b.jsxs)("div",{className:"flex h-screen flex-col bg-[#111827]",children:[(0,b.jsx)("div",{"aria-live":"polite",className:"sr-only",children:E}),(0,b.jsxs)("header",{className:"flex shrink-0 items-center justify-between border-b border-white/10 px-4 py-3",children:[(0,b.jsxs)("a",{href:"/",className:"flex items-center gap-2 rounded-lg focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-primary","aria-label":"Back to home",children:[(0,b.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-blue-primary",children:(0,b.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,b.jsx)("polygon",{points:"23 7 16 12 23 17 23 7"}),(0,b.jsx)("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"})]})}),(0,b.jsx)("span",{className:"text-sm font-semibold text-white",children:"MeetUp"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:["connected"===p&&(0,b.jsxs)("div",{className:"flex items-center gap-1.5 rounded-md bg-green-500/20 px-2.5 py-1",children:[(0,b.jsx)("div",{className:"h-2 w-2 rounded-full bg-green-400"}),(0,b.jsx)("span",{className:"text-xs text-green-300",children:"Connected"})]}),"reconnecting"===p&&(0,b.jsxs)("div",{className:"flex items-center gap-1.5 rounded-md bg-yellow-500/20 px-2.5 py-1",children:[(0,b.jsx)("div",{className:"h-2 w-2 animate-pulse rounded-full bg-yellow-400"}),(0,b.jsxs)("span",{className:"text-xs text-yellow-300",children:["Reconnecting (",z,"/",3,")"]})]}),(0,b.jsxs)("div",{className:"rounded-md bg-white/10 px-3 py-1 text-xs text-slate-300",children:["Room: ",h]})]})]}),(0,b.jsxs)("main",{className:"relative flex min-h-0 flex-1 items-center justify-center p-2 sm:p-4",children:["requesting"===p&&(0,b.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,b.jsx)("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-white/20 border-t-blue-primary"}),(0,b.jsx)("p",{className:"text-sm text-slate-300",children:"Requesting camera access..."})]}),"error"===p&&(0,b.jsxs)("div",{className:"flex max-w-md flex-col items-center gap-4 rounded-xl border border-red-500/30 bg-red-500/10 p-6 text-center",children:[(0,b.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-red-500/20",children:(0,b.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#ef4444",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,b.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,b.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),(0,b.jsx)("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]})}),(0,b.jsx)("p",{role:"alert",className:"text-sm text-red-300",children:r}),(0,b.jsx)("button",{onClick:()=>window.location.reload(),className:"cursor-pointer rounded-lg bg-white/10 px-4 py-2 text-sm text-white transition-colors hover:bg-white/20 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white",children:"Try Again"})]}),D&&(0,b.jsxs)("div",{className:"relative flex h-full w-full max-w-5xl items-center justify-center",children:["connected"===p&&(0,b.jsxs)("div",{className:"relative h-full w-full overflow-hidden rounded-2xl bg-black",children:[(0,b.jsx)("video",{ref:function(a){C.current=a,a&&l.current&&(a.srcObject=l.current)},autoPlay:!0,playsInline:!0,className:"h-full w-full object-cover"}),(0,b.jsx)("div",{className:"absolute bottom-3 left-3 rounded-md bg-black/60 px-2 py-1 text-xs text-white",children:"Remote"})]}),(0,b.jsxs)("div",{className:"connected"===p?"absolute bottom-3 right-3 z-10 aspect-video w-36 overflow-hidden rounded-xl border-2 border-white/20 bg-black shadow-lg transition-all sm:bottom-4 sm:right-4 sm:w-48":"relative aspect-video w-full max-w-3xl overflow-hidden rounded-2xl bg-black",children:[(0,b.jsx)("video",{ref:function(a){B.current=a,a&&i.current&&(a.srcObject=i.current)},autoPlay:!0,playsInline:!0,muted:!0,className:"h-full w-full object-cover"}),v&&(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-800",children:(0,b.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#94a3b8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,b.jsx)("line",{x1:"1",y1:"1",x2:"23",y2:"23"}),(0,b.jsx)("path",{d:"M21 21H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h3m3-3h6l2 3h4a2 2 0 0 1 2 2v9.34m-7.72-2.06a4 4 0 1 1-5.56-5.56"})]})}),(0,b.jsx)("div",{className:"absolute bottom-2 left-2 rounded-md bg-black/60 px-2 py-0.5 text-xs text-white",children:"You"})]}),"connecting"===p&&(0,b.jsxs)("div",{className:"absolute left-1/2 top-6 z-20 flex -translate-x-1/2 items-center gap-2 rounded-lg bg-black/70 px-4 py-2",children:[(0,b.jsx)("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-white/20 border-t-white"}),(0,b.jsx)("p",{className:"text-sm text-slate-300",children:"Connecting to server..."})]}),"waiting"===p&&(0,b.jsxs)("div",{className:"absolute left-1/2 top-6 z-20 flex -translate-x-1/2 items-center gap-2 rounded-lg bg-black/70 px-4 py-2",children:[(0,b.jsx)("div",{className:"h-2 w-2 animate-pulse rounded-full bg-yellow-400"}),(0,b.jsx)("p",{className:"text-sm text-slate-300",children:x?"Participant left the call":"Waiting for participant..."})]}),"reconnecting"===p&&(0,b.jsxs)("div",{className:"absolute left-1/2 top-6 z-20 flex -translate-x-1/2 items-center gap-2 rounded-lg bg-yellow-900/80 px-4 py-2",children:[(0,b.jsx)("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-yellow-200/30 border-t-yellow-200"}),(0,b.jsxs)("p",{className:"text-sm text-yellow-200",children:["Connection lost. Trying again (",z,"/",3,")..."]})]})]})]}),D&&(0,b.jsx)("footer",{className:"flex shrink-0 items-center justify-center border-t border-white/10 px-4 py-3 sm:py-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("button",{onClick:function(){i.current&&(i.current.getAudioTracks().forEach(a=>{a.enabled=!a.enabled}),u(a=>!a))},"aria-label":t?"Unmute microphone":"Mute microphone",className:`flex h-11 w-11 cursor-pointer items-center justify-center rounded-full transition-colors focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white sm:h-12 sm:w-12 ${t?"bg-red-500/20 hover:bg-red-500/30":"bg-white/10 hover:bg-white/20"}`,children:t?(0,b.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#ef4444",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,b.jsx)("line",{x1:"1",y1:"1",x2:"23",y2:"23"}),(0,b.jsx)("path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6"}),(0,b.jsx)("path",{d:"M17 16.95A7 7 0 0 1 5 12v-2m14 0v2c0 .76-.13 1.48-.35 2.17"}),(0,b.jsx)("line",{x1:"12",y1:"19",x2:"12",y2:"23"}),(0,b.jsx)("line",{x1:"8",y1:"23",x2:"16",y2:"23"})]}):(0,b.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,b.jsx)("path",{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}),(0,b.jsx)("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),(0,b.jsx)("line",{x1:"12",y1:"19",x2:"12",y2:"23"}),(0,b.jsx)("line",{x1:"8",y1:"23",x2:"16",y2:"23"})]})}),(0,b.jsx)("button",{onClick:function(){i.current&&(i.current.getVideoTracks().forEach(a=>{a.enabled=!a.enabled}),w(a=>!a))},"aria-label":v?"Turn camera on":"Turn camera off",className:`flex h-11 w-11 cursor-pointer items-center justify-center rounded-full transition-colors focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white sm:h-12 sm:w-12 ${v?"bg-red-500/20 hover:bg-red-500/30":"bg-white/10 hover:bg-white/20"}`,children:v?(0,b.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#ef4444",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,b.jsx)("line",{x1:"1",y1:"1",x2:"23",y2:"23"}),(0,b.jsx)("path",{d:"M21 21H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h3m3-3h6l2 3h4a2 2 0 0 1 2 2v9.34m-7.72-2.06a4 4 0 1 1-5.56-5.56"})]}):(0,b.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,b.jsx)("polygon",{points:"23 7 16 12 23 17 23 7"}),(0,b.jsx)("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"})]})}),(0,b.jsx)("button",{onClick:function(){k.current?.close(),j.current?.destroy(),i.current&&(i.current.getTracks().forEach(a=>a.stop()),i.current=null),window.location.href="/"},"aria-label":"Leave call",className:"flex h-11 w-11 cursor-pointer items-center justify-center rounded-full bg-red-600 transition-colors hover:bg-red-700 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white sm:h-12 sm:w-12",children:(0,b.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,b.jsx)("path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91"}),(0,b.jsx)("line",{x1:"23",y1:"1",x2:"1",y2:"23"})]})})]})})]})}a.s(["default",()=>g],72789)},89018,a=>{a.v(b=>Promise.all(["server/chunks/ssr/5eb52_2e90d86c._.js"].map(b=>a.l(b))).then(()=>b(36281)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__a66078eb._.js.map