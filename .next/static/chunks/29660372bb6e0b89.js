(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,23972,e=>{"use strict";function r(){return navigator.mediaDevices?.getUserMedia?window.RTCPeerConnection?{supported:!0,message:""}:{supported:!1,message:"Your browser doesn't support peer-to-peer connections. Please use Chrome, Firefox, Safari, or Edge."}:{supported:!1,message:"Your browser doesn't support camera access. Please use Chrome, Firefox, Safari, or Edge."}}function t(e){return/^[a-zA-Z0-9_-]{4,36}$/.test(e)}e.s(["checkBrowserSupport",()=>r,"isValidRoomId",()=>t])},32228,e=>{"use strict";var r=e.i(46883),t=e.i(85988);let n={host:"0.peerjs.com",port:443,path:"/",secure:!0},s={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]};var i=e.i(23972);function o({params:o}){let{roomId:l}=(0,t.use)(o),a=(0,t.useRef)(null),c=(0,t.useRef)(null),d=(0,t.useRef)(null),u=(0,t.useRef)(null),h=(0,t.useRef)("host"),x=(0,t.useRef)(null),f=(0,t.useRef)(0),[m,p]=(0,t.useState)("requesting"),[g,b]=(0,t.useState)(""),[w,v]=(0,t.useState)(!1),[j,y]=(0,t.useState)(!1),[k,N]=(0,t.useState)(!1),[C,R]=(0,t.useState)(0),L=(0,t.useRef)(null),T=(0,t.useRef)(null);(0,t.useEffect)(()=>{let{supported:r,message:t}=(0,i.checkBrowserSupport)();if(!r){p("error"),b(t);return}if(!(0,i.isValidRoomId)(l)){p("error"),b("Invalid meeting link. Please check the URL and try again.");return}let o=!1;function m(e){d.current=e,e.on("stream",e=>{u.current=e,T.current&&(T.current.srcObject=e),f.current=0,R(0),p("connected"),N(!1)}),e.on("close",()=>{u.current=null,T.current&&(T.current.srcObject=null),d.current=null,p("waiting"),N(!0)}),e.on("error",()=>{u.current=null,d.current=null,p("waiting")})}function g(e){e.on("disconnected",()=>{o||e.destroyed||function(){if(!o){if(f.current>=3){p("error"),b("Connection lost after multiple attempts. Please refresh and try again.");return}f.current++,R(f.current),p("reconnecting"),setTimeout(()=>{let e=c.current;!o&&e&&e.disconnected&&!e.destroyed&&e.reconnect()},1e3*Math.pow(2,f.current-1))}}()})}return async function(){let r;try{r=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720}},audio:{echoCancellation:!0,noiseSuppression:!0}})}catch(e){if(o)return;if(p("error"),e instanceof DOMException)switch(e.name){case"NotAllowedError":b("Camera access denied. Click the camera icon in your browser's address bar to allow access, then refresh.");break;case"NotFoundError":b("No camera or microphone detected. Please connect a device and refresh.");break;case"NotReadableError":b("Camera or microphone is in use by another application. Close it and refresh.");break;case"OverconstrainedError":b("Camera doesn't support the requested resolution. Please try a different browser.");break;default:b(e.message)}else b("An unexpected error occurred accessing your camera.");return}if(o)return r.getTracks().forEach(e=>e.stop());a.current=r,p("connecting");let{default:t}=await e.A(20199);if(x.current=t,o)return r.getTracks().forEach(e=>e.stop());h.current="host";let i=new t(l,{...n,config:s});c.current=i,i.on("open",()=>{o||(p("waiting"),g(i))}),i.on("call",e=>{o||(e.answer(r),m(e))}),i.on("error",e=>{if(!o)if("unavailable-id"===e.type){var a;let e;i.destroy(),a=r,h.current="joiner",c.current=e=new t({...n,config:s}),e.on("open",()=>{if(o)return;g(e);let r=e.call(l,a);r&&m(r)}),e.on("call",e=>{o||(e.answer(a),m(e))}),e.on("error",e=>{o||("peer-unavailable"===e.type?p("waiting"):(p("error"),b("Connection failed. Check your internet connection and try again.")))})}else p("error"),b("Connection failed. Check your internet connection and try again.")})}(),()=>{o=!0,d.current?.close(),c.current?.destroy(),a.current&&(a.current.getTracks().forEach(e=>e.stop()),a.current=null)}},[l]);let E="connecting"===m||"waiting"===m||"connected"===m||"reconnecting"===m,M="requesting"===m?"Requesting camera access":"connecting"===m?"Connecting to server":"waiting"===m?k?"Participant left the call":"Waiting for participant":"reconnecting"===m?`Reconnecting, attempt ${C} of 3`:"connected"===m?"Connected":"";return(0,r.jsxs)("div",{className:"flex h-screen flex-col bg-[#111827]",children:[(0,r.jsx)("div",{"aria-live":"polite",className:"sr-only",children:M}),(0,r.jsxs)("header",{className:"flex shrink-0 items-center justify-between border-b border-white/10 px-4 py-3",children:[(0,r.jsxs)("a",{href:"/",className:"flex items-center gap-2 rounded-lg focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-primary","aria-label":"Back to home",children:[(0,r.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-blue-primary",children:(0,r.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,r.jsx)("polygon",{points:"23 7 16 12 23 17 23 7"}),(0,r.jsx)("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"})]})}),(0,r.jsx)("span",{className:"text-sm font-semibold text-white",children:"MeetUp"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:["connected"===m&&(0,r.jsxs)("div",{className:"flex items-center gap-1.5 rounded-md bg-green-500/20 px-2.5 py-1",children:[(0,r.jsx)("div",{className:"h-2 w-2 rounded-full bg-green-400"}),(0,r.jsx)("span",{className:"text-xs text-green-300",children:"Connected"})]}),"reconnecting"===m&&(0,r.jsxs)("div",{className:"flex items-center gap-1.5 rounded-md bg-yellow-500/20 px-2.5 py-1",children:[(0,r.jsx)("div",{className:"h-2 w-2 animate-pulse rounded-full bg-yellow-400"}),(0,r.jsxs)("span",{className:"text-xs text-yellow-300",children:["Reconnecting (",C,"/",3,")"]})]}),(0,r.jsxs)("div",{className:"rounded-md bg-white/10 px-3 py-1 text-xs text-slate-300",children:["Room: ",l]})]})]}),(0,r.jsxs)("main",{className:"relative flex min-h-0 flex-1 items-center justify-center p-2 sm:p-4",children:["requesting"===m&&(0,r.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,r.jsx)("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-white/20 border-t-blue-primary"}),(0,r.jsx)("p",{className:"text-sm text-slate-300",children:"Requesting camera access..."})]}),"error"===m&&(0,r.jsxs)("div",{className:"flex max-w-md flex-col items-center gap-4 rounded-xl border border-red-500/30 bg-red-500/10 p-6 text-center",children:[(0,r.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-red-500/20",children:(0,r.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#ef4444",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,r.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),(0,r.jsx)("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]})}),(0,r.jsx)("p",{role:"alert",className:"text-sm text-red-300",children:g}),(0,r.jsx)("button",{onClick:()=>window.location.reload(),className:"cursor-pointer rounded-lg bg-white/10 px-4 py-2 text-sm text-white transition-colors hover:bg-white/20 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white",children:"Try Again"})]}),E&&(0,r.jsxs)("div",{className:"relative flex h-full w-full max-w-5xl items-center justify-center",children:["connected"===m&&(0,r.jsxs)("div",{className:"relative h-full w-full overflow-hidden rounded-2xl bg-black",children:[(0,r.jsx)("video",{ref:function(e){T.current=e,e&&u.current&&(e.srcObject=u.current)},autoPlay:!0,playsInline:!0,className:"h-full w-full object-cover"}),(0,r.jsx)("div",{className:"absolute bottom-3 left-3 rounded-md bg-black/60 px-2 py-1 text-xs text-white",children:"Remote"})]}),(0,r.jsxs)("div",{className:"connected"===m?"absolute bottom-3 right-3 z-10 aspect-video w-36 overflow-hidden rounded-xl border-2 border-white/20 bg-black shadow-lg transition-all sm:bottom-4 sm:right-4 sm:w-48":"relative aspect-video w-full max-w-3xl overflow-hidden rounded-2xl bg-black",children:[(0,r.jsx)("video",{ref:function(e){L.current=e,e&&a.current&&(e.srcObject=a.current)},autoPlay:!0,playsInline:!0,muted:!0,className:"h-full w-full object-cover"}),j&&(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-800",children:(0,r.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#94a3b8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,r.jsx)("line",{x1:"1",y1:"1",x2:"23",y2:"23"}),(0,r.jsx)("path",{d:"M21 21H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h3m3-3h6l2 3h4a2 2 0 0 1 2 2v9.34m-7.72-2.06a4 4 0 1 1-5.56-5.56"})]})}),(0,r.jsx)("div",{className:"absolute bottom-2 left-2 rounded-md bg-black/60 px-2 py-0.5 text-xs text-white",children:"You"})]}),"connecting"===m&&(0,r.jsxs)("div",{className:"absolute left-1/2 top-6 z-20 flex -translate-x-1/2 items-center gap-2 rounded-lg bg-black/70 px-4 py-2",children:[(0,r.jsx)("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-white/20 border-t-white"}),(0,r.jsx)("p",{className:"text-sm text-slate-300",children:"Connecting to server..."})]}),"waiting"===m&&(0,r.jsxs)("div",{className:"absolute left-1/2 top-6 z-20 flex -translate-x-1/2 items-center gap-2 rounded-lg bg-black/70 px-4 py-2",children:[(0,r.jsx)("div",{className:"h-2 w-2 animate-pulse rounded-full bg-yellow-400"}),(0,r.jsx)("p",{className:"text-sm text-slate-300",children:k?"Participant left the call":"Waiting for participant..."})]}),"reconnecting"===m&&(0,r.jsxs)("div",{className:"absolute left-1/2 top-6 z-20 flex -translate-x-1/2 items-center gap-2 rounded-lg bg-yellow-900/80 px-4 py-2",children:[(0,r.jsx)("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-yellow-200/30 border-t-yellow-200"}),(0,r.jsxs)("p",{className:"text-sm text-yellow-200",children:["Connection lost. Trying again (",C,"/",3,")..."]})]})]})]}),E&&(0,r.jsx)("footer",{className:"flex shrink-0 items-center justify-center border-t border-white/10 px-4 py-3 sm:py-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("button",{onClick:function(){a.current&&(a.current.getAudioTracks().forEach(e=>{e.enabled=!e.enabled}),v(e=>!e))},"aria-label":w?"Unmute microphone":"Mute microphone",className:`flex h-11 w-11 cursor-pointer items-center justify-center rounded-full transition-colors focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white sm:h-12 sm:w-12 ${w?"bg-red-500/20 hover:bg-red-500/30":"bg-white/10 hover:bg-white/20"}`,children:w?(0,r.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#ef4444",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,r.jsx)("line",{x1:"1",y1:"1",x2:"23",y2:"23"}),(0,r.jsx)("path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6"}),(0,r.jsx)("path",{d:"M17 16.95A7 7 0 0 1 5 12v-2m14 0v2c0 .76-.13 1.48-.35 2.17"}),(0,r.jsx)("line",{x1:"12",y1:"19",x2:"12",y2:"23"}),(0,r.jsx)("line",{x1:"8",y1:"23",x2:"16",y2:"23"})]}):(0,r.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,r.jsx)("path",{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}),(0,r.jsx)("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),(0,r.jsx)("line",{x1:"12",y1:"19",x2:"12",y2:"23"}),(0,r.jsx)("line",{x1:"8",y1:"23",x2:"16",y2:"23"})]})}),(0,r.jsx)("button",{onClick:function(){a.current&&(a.current.getVideoTracks().forEach(e=>{e.enabled=!e.enabled}),y(e=>!e))},"aria-label":j?"Turn camera on":"Turn camera off",className:`flex h-11 w-11 cursor-pointer items-center justify-center rounded-full transition-colors focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white sm:h-12 sm:w-12 ${j?"bg-red-500/20 hover:bg-red-500/30":"bg-white/10 hover:bg-white/20"}`,children:j?(0,r.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#ef4444",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,r.jsx)("line",{x1:"1",y1:"1",x2:"23",y2:"23"}),(0,r.jsx)("path",{d:"M21 21H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h3m3-3h6l2 3h4a2 2 0 0 1 2 2v9.34m-7.72-2.06a4 4 0 1 1-5.56-5.56"})]}):(0,r.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,r.jsx)("polygon",{points:"23 7 16 12 23 17 23 7"}),(0,r.jsx)("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"})]})}),(0,r.jsx)("button",{onClick:function(){d.current?.close(),c.current?.destroy(),a.current&&(a.current.getTracks().forEach(e=>e.stop()),a.current=null),window.location.href="/"},"aria-label":"Leave call",className:"flex h-11 w-11 cursor-pointer items-center justify-center rounded-full bg-red-600 transition-colors hover:bg-red-700 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white sm:h-12 sm:w-12",children:(0,r.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,r.jsx)("path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91"}),(0,r.jsx)("line",{x1:"23",y1:"1",x2:"1",y2:"23"})]})})]})})]})}e.s(["default",()=>o],32228)},20199,e=>{e.v(r=>Promise.all(["static/chunks/2f1d4b2d0ac018cf.js"].map(r=>e.l(r))).then(()=>r(16603)))}]);